\documentclass[addpoints]{exam}
%\documentclass[12pt,addpoints,answers]{exam} % To print with answers
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{fancybox}
\usepackage{svg}
\usepackage{listings}
\usepackage{todonotes}
\lstset{basicstyle=\ttfamily,
  showstringspaces=false,
  showspaces=false,
  showtabs=false,
  showstringspaces=false,
  commentstyle=\color{red},
  keywordstyle=\color{blue}
}
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}





\pagestyle{headandfoot}
\firstpageheadrule
\firstpageheader{Name:} { } {Systems-Development and Frameworks}
\firstpagefooter{}{Final Exam, Page \thepage\ of \numpages}
{}
\runningheader{Name:} { } {Systems-Development and Frameworks}
\runningfooter{}{Final Exam, Page \thepage\ of \numpages}
{}
\runningheadrule
\runningfootrule

%%%%% Cover page

\coverfirstpageheader{HTW Berlin \\ Department of Computer Science}{\includesvg{assets/logo}}{Systems-Development\\ and Frameworks}
\runningheadrule
\runningfootrule
\onehalfspacing
\newcommand{\tf}[1][{}]{%
\fillin[#1][0.25in]%
}

\begin{document}
%\maketitle
\pointsinmargin % To print points in margin
\boxedpoints   % or \bracketedpoints

\begin{coverpages}
\hrule
\hrule
\noindent
\begin{tabular}{@{}p{.4\textwidth}@{\hspace{2cm}}p{.4\textwidth}@{}}
  \\
Name:\enspace\hrulefill & Matriculation number:\enspace\hrulefill
\end{tabular}
\noindent
\vspace{0.5cm}

\setlength{\fboxsep}{1em}
\fbox{
  \parbox{\textwidth}{
\begin{minipage}{6.5in}
Your grade in the following exam does not reflect your talent as a fullstack
developer. Many skills that are essential for every developer cannot be
assessed in a written exam, e.g. self-organization, communication of knowledge,
empathy, helping out your co-workers.\\

The primary purpose of this exam is to generate an objective metric for your
grade which is a formal requirement of the university.\\

Besides that, the exam may work as a motivation for you to learn: When you read
this sentence you are probably preparing yourself for the exam, so you learn
something along the way.

\begin{center}
Good luck! \\
Robert Sch√§fer
\end{center}

\end{minipage}
}}

\begin{center}
\gradetable[h][questions]
% Or use \gradetable[v][questions]
\end{center}

\end{coverpages}

\begin{questions}


\question Project Management

\begin{parts}
  \part[1] Complete the following sentence:
The motto of our course is ``Le\_\_n and S\_\_\_e''

  \part[1]
  What is the bus factor? Write a definition.
  \fillwithdottedlines{6em}

  \part[1]
  What is better: A high or a low bus factor?
  \fillwithdottedlines{2em}


\part[2]
  In the lecture we covered five benefits of software testing. Please fill in at
  least two of them in figure~\ref{fig:software-testing-benefits} and explain
  them by example: What could go wrong without software testing with respect to
  that benefit? Why does something work better with software testing?
\fillwithdottedlines{12em}

\begin{figure}[h]
  \centering
  \includesvg[width=0.4\textwidth]{assets/project-management/software-testing-benefits.svg}
  \caption{Five benefits of software testing}
  \label{fig:software-testing-benefits}
\end{figure}

  \part[3]
  \todo[inline]{There will be at least three more questions here}
  \part[2]
  \todo[inline]{There will also be a question about continuous integration}
\end{parts}

\clearpage

\question Git
\begin{parts}

\part[1]
 What data is hashed in order to generate a git commit id? Enumerate at least three
 attributes.
\fillwithdottedlines{4em}

\part[2]
  Is \texttt{git reset --hard} reversible? If yes, how can you reverse it? If
  no, please explain why.
\fillwithdottedlines{8em}

\part[2]
  Is \texttt{git clean --force} reversible? If yes, how can you reverse it? If
  no, please explain why.
\fillwithdottedlines{8em}

\part
  Consider the following scenario: You forgot to create a feature branch and
  committed on branch \texttt{master} by accident.\\

  Now you want to create a pull request. In order to do that you create a new
  branch with:
  \begin{lstlisting}
  git checkout -b feature-branch
  \end{lstlisting}
  You can see your current git history in figure~\ref{fig:git:1}.

\begin{figure}[h]
  \centering
  \includesvg[width=0.8\textwidth]{assets/git/1.svg}
  \caption{After \texttt{git checkout -b feature-branch}}
  \label{fig:git:1}
\end{figure}

\begin{subparts}
\subpart[1]
  What are the commands that produce a git history as shown in
  figure~\ref{fig:git:2}?\\
\fillwithdottedlines{8em}

\begin{figure}[h]
  \centering
  \includesvg[width=0.8\textwidth]{assets/git/2.svg}
  \caption{Remove commits from \texttt{master}}
  \label{fig:git:2}
\end{figure}



\subpart[1]
  Consider your git history looks as shown in figure~\ref{fig:git:2}.
  On wich commit do you need to rebase in order to produce a git rebase log as
  shown in figure~\ref{fig:rebase-log} and finally a git history as shown
  in figure~\ref{fig:git:3}?
  \begin{lstlisting}
    git checkout feature-branch
    git rebase --interactive ....
  \end{lstlisting}

\begin{figure}[h]
  \centering
  \includesvg[width=0.8\textwidth]{assets/git/3.svg}
  \caption{Commits contain changes of the commits on top of the respective nodes}
  \label{fig:git:3}
\end{figure}


  \subpart[2] How do you need to change the rebase log in
  figure~\ref{fig:rebase-log} to produce a git history as shown in
  figure~\ref{fig:git:3}?

  \begin{figure}[h]
    \begin{lstlisting}[language=bash]
    pick C      ..........................
    pick D      ..........................
    pick E      ..........................
    pick F      ..........................
    pick G      ..........................
    \end{lstlisting}
    \caption{Rebase log of your editor}
    \label{fig:rebase-log}
  \end{figure}

\end{subparts}

\part[2] TODO
\todo[inline]{In the final exam, I will create a more elaborate scenario and
assign more points to it}
\end{parts}


\clearpage

\question Functional Programming

\begin{parts}
\part[1] What are higher order functions?
\fillwithdottedlines{2em}

\part[1] Give an example of a higher order function in JavaScript:
\makeemptybox{8em}

\part
The following code examples have unnecessary temporary variables. How can you
refactor the code examples and eliminate these temporary variables?
\begin{lstlisting}[extendedchars=true,basicstyle=\footnotesize\ttfamily,language=JavaScript]
function findNextId (){
  let lastId = 0;
  for (i = 0; i < data.todos.length; i++) {
      if (data.todos[i].id > lastId) {
          lastId = data.todos[i].id;
      }
  }
  lastId += 1;
  return lastId;
}
\end{lstlisting}
\makeemptybox{12em}

\begin{lstlisting}[extendedchars=true,basicstyle=\footnotesize\ttfamily,language=JavaScript]
function filterTodos(mok, userAuth) {
  var retArray = []

  for (var i = 0; i < mok.length; i++) {
      if (mok[i].userAuth == userAuth) {
          retArray.push(mok[i])
      }
  }
  return retArray
}
\end{lstlisting}
\makeemptybox{12em}

  \missingfigure{Add one more code example here}

\begin{subparts}
  \subpart[3]
  You will get a point per code example if you can name the right method which
  you could apply.
  \subpart[3]
  You will get a point per code example if you can write down the correct (or
  almost correct) refactored source code.
\end{subparts}
\end{parts}


\clearpage
\question GraphQL and Apollo-Server

\begin{parts}
\part[1] What are the problems that GraphQL solves in comparison with REST?
  Explain how exactly GraphQL solves these problems.
  \fillwithdottedlines{8em}

  \part[2]
  Look at the implementation in figure~\ref{fig:apollo-server}. When we send
  the graphql query in figure~\ref{fig:graphql-query} to the server, what is the
  response of the server?
  \begin{figure}[h]
    \begin{lstlisting}[language=bash]
      query {
        hello(name: "Again")
      }
    \end{lstlisting}
    \caption{Graphql query}
    \label{fig:graphql-query}
  \end{figure}
  \makeemptybox{12em}

\part What gets written to the terminal of the backend? Write down the output of
  the \texttt{console.log} statements. You will get points for the following:
\begin{subparts}
  \subpart[1] Correct selection of traversed calls
  \subpart[1] Correct number of calls
  \subpart[1] Correct order of calls
  \subpart[1] Correct value of \texttt{parent}
  \subpart[1] Correct value of \texttt{args}
\end{subparts}
\makeemptybox{18em}
\begin{figure}[h]
  \lstinputlisting[
    numbers=left,
    numberstyle=\footnotesize,
    numbersep=3em,
    extendedchars=true,
    basicstyle=\footnotesize\ttfamily,
    language=JavaScript
  ]{assets/code/graphql/index.js}
  \caption{Apollo server implementation}
  \label{fig:apollo-server}
\end{figure}
\end{parts}

\clearpage

\question Neo4J

Here is the visualization of a graph.
\missingfigure{Add graph visualization of the current state in the database}
When you send the following cypher statement to the database:
\missingfigure{Add cypher statement}

\begin{parts}
  \part[3] How does the result set look like?
  \makeemptybox{12em}
  \part[3] How many records are in the result set?
  \fillwithdottedlines{2em}
  \part[3] Here is a graph visualization of a desired state in the database.
  \missingfigure{Add graph visualization of the desired state in the database}
  Write down a single cypher statement that produces the desired result.
  \makeemptybox{12em}
  \fillwithdottedlines{2em}
\end{parts}

\clearpage

\question VueJS and NuxtJS
\begin{parts}
  \part[2] What are the pros and cons of a single page application and
  client-side-rendering in comparison with a traditional multi-page and
  server-side-rendered application?
  \fillwithdottedlines{8em}
  \part[1] What is isomorphic code?
  \fillwithdottedlines{4em}
  \part[2] NuxtJS provides server-side-rendering for VueJS. What is the motivation
  to do both server-side-rendering and client-side-rendering?
  \fillwithdottedlines{8em}
  \part Have a look at this diagram which shows the different components and
  its responsibilities.
  \missingfigure{Add component diagram}
  \missingfigure{Add backend response as JSON}
  \begin{subparts}
  \subpart[3]
  What is the minimal data that needs to get passed as
  property down to the subcomponents respectively? Write your answer as an
  annotation in the diagram.
  \subpart[3] What are the events that should get emitted from the subcomponents to
  the parent components respectively? Write your answer as an
  annotation in the diagram.
  \end{subparts}
\end{parts}

\clearpage

\question Fullstack testing and Requirements Engineering
\todo[inline]{Add description of a web application in detail}
\begin{parts}
\part[2]
What are the issues with the following user story?
\missingfigure{Add user story}
\part[2]
Write down a cucumber scenario which could be a valid acceptance criteria for
the user story.
\end{parts}

\clearpage

\question Code Review
\begin{parts}
\part[10] Give a code review of the following pull request. Find and annotate
  issues in the code. You will get a point only if you can explain what the
  problem is. You can get another point if you can give a suggestion how to fix
  the problem. There are about 20 issues in the code example. It is enough if
  you can find 10 issues and explain the problem. Alternatively you can also
  find 5 issues, explain the problem \textbf{and} write down the source code as
  a suggestion to fix it. Anything in between is also possible.

\todo[inline]{Mixing async/await with then/catch}
\todo[inline]{Not sanitizing strings and having a cypher injection vulnerability}
\todo[inline]{C-style for loop}
\todo[inline]{Writing 'should' in test case descriptions}
\todo[inline]{Not closing sessions}
\todo[inline]{Multiline string without backticks}
\todo[inline]{Using index literals or keys instead of array/object destructuring}
\todo[inline]{Merge objects with ... spread operator}
\todo[inline]{Secrets in source code}
\todo[inline]{Not using jest's async expectations}
\todo[inline]{Nested if-clauses instead of guard clauses}
\todo[inline]{Expose user listing in login resolver}
\todo[inline]{Missing ID in type definitions}
\todo[inline]{Not using hard-coded values for expectations}

\end{parts}

\end{questions}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
